"use strict";(self.webpackChunkloteria_nacional_front=self.webpackChunkloteria_nacional_front||[]).push([[767],{6767:(T,h,c)=>{c.r(h),c.d(h,{AdministracionModule:()=>P});var b=c(8583),f=c(8741),p=c(8239),t=c(3018),d=c(1841),v=c(2340);let C=(()=>{class o{constructor(e){this.http=e,this.mySource=v.N.source}getBannerLink(){let e=new d.WM;e=e.append("Content-Type","application/json");let n="/administracion";return n=this.mySource+n+"/files",new Promise((s,a)=>{this.http.get(n,{headers:e}).subscribe(i=>{s(i)},i=>{a(new Error(i.error.message))})})}obtenerCodigos(){let e=new d.WM;e=e.append("Content-Type","application/json");let n="/codigosPromocionales";return n=this.mySource+n+"/getCodeCsv",new Promise((s,a)=>{this.http.get(n,{headers:e}).subscribe(i=>{s(i)},i=>{a(new Error(i.error.message))})})}getStatus(){let e=new d.WM;e=e.append("Content-Type","application/json");let n="/codigosPromocionales";return n=this.mySource+n+"/status",new Promise((s,a)=>{this.http.get(n,{headers:e}).subscribe(i=>{s(i)},i=>{a(new Error(i.error.message))})})}setStatus(e){let n=new d.WM;n=n.append("Content-Type","application/json");let r="/codigosPromocionales";return r=this.mySource+r+"/status",new Promise((a,i)=>{this.http.post(r,{showPromo:e},{headers:n}).subscribe(m=>{a(m)},m=>{i(new Error(m.error.message))})})}cargarImagenes(e){let n=new d.WM,r="/codigosPromocionales";return r=this.mySource+r+"/files",new Promise((a,i)=>{this.http.post(r,e,{headers:n}).subscribe(u=>{a(u)},u=>{i(new Error(u.error.message))})})}obtenerTxt(){let e="/codigosPromocionales";return e=this.mySource+e+"/getTxt",this.http.get(e,{observe:"response",responseType:"blob"})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(d.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var y=c(5396),g=c(665);const A=[{path:"",component:(()=>{class o{constructor(e){this.administracionService=e,this.codigos=[],this.showPromo=!1}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.showPromo=yield e.administracionService.getStatus()})()}imagenesSeleccionadas(){var e=this;return(0,p.Z)(function*(){const n=document.querySelector("#file").files,r=new FormData;Object.keys(n).length&&(Object.keys(n).forEach(a=>{r.append(n.item(a).name,n.item(a))}),yield e.administracionService.cargarImagenes(r))})()}generarTxt(){var e=this;return(0,p.Z)(function*(){e.codigos=e.administracionService.obtenerTxt().subscribe(n=>{var r="";const s=n.headers.get("Content-Disposition");if(s){const m=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/.exec(s);null!=m&&m[1]&&(r=m[1].replace(/['"]/g,""))}const a=new Blob([n.body],{type:"text/txt"}),i=document.createElement("a");i.href=URL.createObjectURL(a),i.download=r,i.click()},n=>{throw new Error(n.error.message)})})()}changePopup(){var e=this;return(0,p.Z)(function*(){yield e.administracionService.setStatus(e.showPromo)})()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(C))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-administracion"]],decls:9,vars:1,consts:[[1,"containerBox"],[3,"ngModel","ngModelChange","change"],["type","button","mat-raised-button","",3,"click"],["hidden","","accept","image/*","multiple","","type","file","id","file",3,"change"],["fileInput",""],[3,"click"]],template:function(e,n){if(1&e){const r=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"mat-slide-toggle",1),t.NdJ("ngModelChange",function(a){return n.showPromo=a})("change",function(){return n.changePopup()}),t._uU(2,"Habilitar popup"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return t.CHM(r),t.MAs(6).click()}),t._uU(4," Escoja la(s) imagen(es) del popup "),t.qZA(),t.TgZ(5,"input",3,4),t.NdJ("change",function(){return n.imagenesSeleccionadas()}),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return n.generarTxt()}),t._uU(8,"Generar archivo de codigos"),t.qZA(),t.qZA()}2&e&&(t.xp6(1),t.Q6J("ngModel",n.showPromo))},directives:[y.Rr,g.JJ,g.On],styles:['.containerBox[_ngcontent-%COMP%]{background-color:transparent;display:flex;flex-direction:column;justify-content:center;align-items:center}.containerBox[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:40px;height:30px;padding:5px 50px;outline:none;font-family:"Monstserrat SemiBold";color:#fff;font-size:12px;cursor:pointer;transition:background-color .5s ease;background-color:#28aae1;border:1px solid #28aae1}.containerBox[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#fff;color:#28aae1;transition:background-color .5s ease}']}),o})()}];let M=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[f.Bz.forChild(A)],f.Bz]}),o})();var S=c(2541);let P=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[b.ez,d.JF,y.rP,g.UX,g.u5,S.m,M]]}),o})()}}]);