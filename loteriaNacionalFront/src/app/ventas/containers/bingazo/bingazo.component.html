<ventas-menu-header></ventas-menu-header>

<div class="contenedor_loteria" *ngIf="showComponents">
  <app-detalle-sorteo
    class="infoBox"
    titulo="Bingazo"
    color="bingazo"
    [sorteos]="sorteo"
    [loteria]="5"
    (emitir)="procesaEmitir($event)"
  >
  </app-detalle-sorteo>
  <div class="ventasBox">
    <div class="contendor_seleccion">
      <div class="contenedor_select_animales">
        <mat-accordion>
          <mat-expansion-panel hideToggle expanded #figureSelector>
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h3>ESCOGE UNA FRUTA O REINTEGRO FAVORITO</h3>
              </mat-panel-title>
            </mat-expansion-panel-header>
            <div class="options">
              <div
                class="option"
                *ngFor="let fruta of seleccionFrutas; let i = index"
              >
                <input
                  (click)="agregar(fruta, i)"
                  type="checkbox"
                  [checked]="fruta.status"
                  name="nombre"
                  [value]="fruta"
                  [id]="fruta.nombre"
                />
                <label [for]="fruta.nombre">
                  <img [src]="fruta.ruta" [alt]="fruta.nombre" loading="lazy"/>
                </label>
              </div>
            </div>
          </mat-expansion-panel>
        </mat-accordion>
      </div>
      <div class="selectBox">
        <button
          class="activado"
          (click)="buscarNumero()"
          *ngIf="buscarCartones"
        >
          BUSCAR CARTONES
        </button>
        <button
          class="activado"
          (click)="openSelector()"
          *ngIf="!buscarCartones"
        >
          CAMBIAR FRUTA O REINTEGRO
        </button>
      </div>
      <div *ngIf="showNumeros" class="ticketsBox">
        <div
          class="ticketBox"
          *ngFor="
            let ticket of ticketsDisponibles
              | paginacion : page_size : page_number;
            let i = index
          "
        >
          <div class="bingazoBox">
            <div class="contenedor_seleccion_numero">
              <div class="imagen_animal">
                <img [src]="obtenerFruta(ticket.fruta)" alt="" />
                <p>Nº DE CARTÓN: {{ ticket.combinacion1 }}</p>
              </div>
              <div class="numeros">
                <ng-container *ngFor="let numero of ticket.display">
                  <p *ngIf="numero != '00'">
                    {{ numero }}
                  </p>
                  <img
                    *ngIf="numero == '00'"
                    src="assets/guachito.png"
                    alt=""
                  />
                </ng-container>
              </div>
            </div>
          </div>

          <div class="buttonsBox">
            <button
              (click)="deleteBingazoTicket(ticket.identificador)"
              [disabled]="!ticket.status"
            >
              LIMPIAR
            </button>
            <button
              [disabled]="ticket.status"
              (click)="seleccionarTicket(page_size * (page_number - 1) + i)"
            >
              AGREGAR AL CARRITO
            </button>
          </div>
        </div>
        <div class="contenedor_botones">
          <mat-paginator
            style-paginator
            [length]="ticketsDisponibles.length"
            [pageSize]="page_size"
            (page)="handlerPage($event)"
          >
          </mat-paginator>
        </div>
      </div>
    </div>

    <app-carrito
      class="ticketScroller"
      (emitirCompra)="comprar()"
      (eliminarTodo)="deleteAllTickets()"
      (deleteLoteriaTicket)="deleteLoteriaTicket($event)"
      (deleteLottoTicket)="deleteLottoTicket($event)"
      (deletePozoTicket)="deletePozoTicket($event)"
      (deleteMillonariaTicket)="deleteMillonariaTicket($event)"
      (deleteLoteriaFraccion)="deleteLoteriaFraccion($event)"
      (deleteBingazoTicket)="deleteBingazoTicket($event)"
      [ticketsLoteria]="ticketsLoteria"
      (deletePozoRevanchaTicket)="deletePozoRevanchaTicket($event)"
      [ticketsMillonaria]="ticketsMillonaria"
      [ticketsPozoRevancha]="ticketsPozoRevancha"
      [ticketsLotto]="ticketsLotto"
      [ticketsBingazo]="ticketsBingazo"
      [ticketsPozo]="ticketsPozo"
      tipoLoteria="bingazo"
    >
    </app-carrito>
  </div>
</div>
<app-floating-menu
  (emitirCompra)="comprar()"
  (eliminarTodo)="deleteAllTickets()"
  (deleteLoteriaTicket)="deleteLoteriaTicket($event)"
  (deleteLottoTicket)="deleteLottoTicket($event)"
  (deletePozoTicket)="deletePozoTicket($event)"
  (deletePozoRevanchaTicket)="deletePozoRevanchaTicket($event)"
  (deleteLoteriaFraccion)="deleteLoteriaFraccion($event)"
  (deleteMillonariaTicket)="deleteMillonariaTicket($event)"
  (deleteBingazoTicket)="deleteBingazoTicket($event)"
  [ticketsLoteria]="ticketsLoteria"
  [ticketsLotto]="ticketsLotto"
  [ticketsPozoRevancha]="ticketsPozoRevancha"
  [ticketsPozo]="ticketsPozo"
  [ticketsBingazo]="ticketsBingazo"
  [ticketsMillonaria]="ticketsMillonaria"
  tipoLoteria="bingazo"
></app-floating-menu>
<app-loader
  loader="bingazo"
  [message]="loadingMessage!"
  *ngIf="isLoading"
></app-loader>

<app-error
  [msg]="errorMessage!"
  (closeError)="closeError()"
  *ngIf="isError"
></app-error>
<app-error
  [msg]="validationErrorMessage!"
  (closeError)="closeValidationError()"
  *ngIf="isValidationError"
></app-error>
<app-saldo-insuficiente
  [message]="recargaDeSaldoMessage"
  (volver)="saldoInsuficiente = false"
  (recarga)="irARecarga()"
  class="paymentItem"
  *ngIf="saldoInsuficiente"
></app-saldo-insuficiente>
