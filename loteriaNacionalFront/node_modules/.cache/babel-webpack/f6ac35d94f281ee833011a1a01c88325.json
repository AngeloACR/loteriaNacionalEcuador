{"ast":null,"code":"import _asyncToGenerator from \"/home/angeloacr/Proyectos/loteriaNacional/app/loteriaNacionalFront/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/codigos-promocionales.service\";\nexport class CodigosPromocionalesComponent {\n  constructor(codigosService) {\n    this.codigosService = codigosService;\n    this.codigos = [];\n  }\n\n  ngOnInit() {//this.codigos = (await this.codigosService.obtenerCodigos() as any).values\n\n    return _asyncToGenerator(function* () {})();\n  }\n\n  generarTxt() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.codigos = _this.codigosService.obtenerTxt().subscribe(data => {\n        var fileName = \"\";\n        const contentDisposition = data.headers.get('Content-Disposition');\n\n        if (contentDisposition) {\n          const fileNameRegex = /filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/;\n          const matches = fileNameRegex.exec(contentDisposition);\n\n          if (matches != null && matches[1]) {\n            fileName = matches[1].replace(/['\"]/g, '');\n          }\n        }\n\n        const blob = new Blob([data.body], {\n          type: \"text/txt\"\n        });\n        const element = document.createElement(\"a\");\n        element.href = URL.createObjectURL(blob);\n        element.download = fileName;\n        element.click();\n      }, error => {\n        throw new Error(error.error.message);\n      });\n    })();\n  }\n\n}\n\nCodigosPromocionalesComponent.ɵfac = function CodigosPromocionalesComponent_Factory(t) {\n  return new (t || CodigosPromocionalesComponent)(i0.ɵɵdirectiveInject(i1.CodigosPromocionalesService));\n};\n\nCodigosPromocionalesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CodigosPromocionalesComponent,\n  selectors: [[\"app-codigos-promocionales\"]],\n  decls: 2,\n  vars: 0,\n  consts: [[3, \"click\"]],\n  template: function CodigosPromocionalesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function CodigosPromocionalesComponent_Template_button_click_0_listener() {\n        return ctx.generarTxt();\n      });\n      i0.ɵɵtext(1, \"Generar archivo de codigos\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\"button[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  border-radius: 40px;\\n  height: 30px;\\n  padding: 5px 50px;\\n  outline: none;\\n  font-family: \\\"Monstserrat SemiBold\\\";\\n  color: #fff;\\n  font-size: 12px;\\n  cursor: pointer;\\n  transition: background-color 0.5s ease;\\n  background-color: #2f72b9;\\n  border: 1px solid #2f72b9;\\n}\\nbutton[_ngcontent-%COMP%]:hover {\\n  background-color: #fff;\\n  color: #2f72b9;\\n  transition: background-color 0.5s ease;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvZGlnb3MtcHJvbW9jaW9uYWxlcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQTtFQUNFLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxnQ0FBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLG1DQVplO0VBYWYsV0FBQTtFQUNBLGVBQUE7RUFDQSxlQUFBO0VBQ0Esc0NBQUE7RUFDQSx5QkFmYTtFQWdCYix5QkFBQTtBQUZGO0FBR0U7RUFDRSxzQkFBQTtFQUNBLGNBbkJXO0VBb0JYLHNDQUFBO0FBREoiLCJmaWxlIjoiY29kaWdvcy1wcm9tb2Npb25hbGVzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiJGZ1ZW50ZS1ib3RvbmVzOiBcIk1vbnN0c2VycmF0IFNlbWlCb2xkXCI7XG5cbiRjb2xvci1ib3R0b246ICMyZjcyYjk7XG5idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogNTAlO1xuICBsZWZ0OiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICBib3JkZXItcmFkaXVzOiA0MHB4O1xuICBoZWlnaHQ6IDMwcHg7XG4gIHBhZGRpbmc6IDVweCA1MHB4O1xuICBvdXRsaW5lOiBub25lO1xuICBmb250LWZhbWlseTogJGZ1ZW50ZS1ib3RvbmVzO1xuICBjb2xvcjogI2ZmZjtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC41cyBlYXNlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAkY29sb3ItYm90dG9uO1xuICBib3JkZXI6IDFweCBzb2xpZCAkY29sb3ItYm90dG9uO1xuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGNvbG9yOiAkY29sb3ItYm90dG9uO1xuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC41cyBlYXNlO1xuICB9XG59XG4iXX0= */\"]\n});","map":{"version":3,"sources":["/home/angeloacr/Proyectos/loteriaNacional/app/loteriaNacionalFront/src/app/codigos-promocionales/codigos-promocionales.component.ts"],"names":["i0","i1","CodigosPromocionalesComponent","constructor","codigosService","codigos","ngOnInit","generarTxt","obtenerTxt","subscribe","data","fileName","contentDisposition","headers","get","fileNameRegex","matches","exec","replace","blob","Blob","body","type","element","document","createElement","href","URL","createObjectURL","download","click","error","Error","message","ɵfac","CodigosPromocionalesComponent_Factory","t","ɵɵdirectiveInject","CodigosPromocionalesService","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","template","CodigosPromocionalesComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","CodigosPromocionalesComponent_Template_button_click_0_listener","ɵɵtext","ɵɵelementEnd","styles"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/codigos-promocionales.service\";\nexport class CodigosPromocionalesComponent {\n    constructor(codigosService) {\n        this.codigosService = codigosService;\n        this.codigos = [];\n    }\n    async ngOnInit() {\n        //this.codigos = (await this.codigosService.obtenerCodigos() as any).values\n    }\n    async generarTxt() {\n        this.codigos = this.codigosService.obtenerTxt().subscribe((data) => {\n            var fileName = \"\";\n            const contentDisposition = data.headers.get('Content-Disposition');\n            if (contentDisposition) {\n                const fileNameRegex = /filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/;\n                const matches = fileNameRegex.exec(contentDisposition);\n                if (matches != null && matches[1]) {\n                    fileName = matches[1].replace(/['\"]/g, '');\n                }\n            }\n            const blob = new Blob([data.body], { type: \"text/txt\" });\n            const element = document.createElement(\"a\");\n            element.href = URL.createObjectURL(blob);\n            element.download = fileName;\n            element.click();\n        }, (error) => {\n            throw new Error(error.error.message);\n        });\n    }\n}\nCodigosPromocionalesComponent.ɵfac = function CodigosPromocionalesComponent_Factory(t) { return new (t || CodigosPromocionalesComponent)(i0.ɵɵdirectiveInject(i1.CodigosPromocionalesService)); };\nCodigosPromocionalesComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: CodigosPromocionalesComponent, selectors: [[\"app-codigos-promocionales\"]], decls: 2, vars: 0, consts: [[3, \"click\"]], template: function CodigosPromocionalesComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function CodigosPromocionalesComponent_Template_button_click_0_listener() { return ctx.generarTxt(); });\n        i0.ɵɵtext(1, \"Generar archivo de codigos\");\n        i0.ɵɵelementEnd();\n    } }, styles: [\"button[_ngcontent-%COMP%] {\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n  border-radius: 40px;\\n  height: 30px;\\n  padding: 5px 50px;\\n  outline: none;\\n  font-family: \\\"Monstserrat SemiBold\\\";\\n  color: #fff;\\n  font-size: 12px;\\n  cursor: pointer;\\n  transition: background-color 0.5s ease;\\n  background-color: #2f72b9;\\n  border: 1px solid #2f72b9;\\n}\\nbutton[_ngcontent-%COMP%]:hover {\\n  background-color: #fff;\\n  color: #2f72b9;\\n  transition: background-color 0.5s ease;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvZGlnb3MtcHJvbW9jaW9uYWxlcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFHQTtFQUNFLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxnQ0FBQTtFQUNBLG1CQUFBO0VBQ0EsWUFBQTtFQUNBLGlCQUFBO0VBQ0EsYUFBQTtFQUNBLG1DQVplO0VBYWYsV0FBQTtFQUNBLGVBQUE7RUFDQSxlQUFBO0VBQ0Esc0NBQUE7RUFDQSx5QkFmYTtFQWdCYix5QkFBQTtBQUZGO0FBR0U7RUFDRSxzQkFBQTtFQUNBLGNBbkJXO0VBb0JYLHNDQUFBO0FBREoiLCJmaWxlIjoiY29kaWdvcy1wcm9tb2Npb25hbGVzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiJGZ1ZW50ZS1ib3RvbmVzOiBcIk1vbnN0c2VycmF0IFNlbWlCb2xkXCI7XG5cbiRjb2xvci1ib3R0b246ICMyZjcyYjk7XG5idXR0b24ge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogNTAlO1xuICBsZWZ0OiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xuICBib3JkZXItcmFkaXVzOiA0MHB4O1xuICBoZWlnaHQ6IDMwcHg7XG4gIHBhZGRpbmc6IDVweCA1MHB4O1xuICBvdXRsaW5lOiBub25lO1xuICBmb250LWZhbWlseTogJGZ1ZW50ZS1ib3RvbmVzO1xuICBjb2xvcjogI2ZmZjtcbiAgZm9udC1zaXplOiAxMnB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC41cyBlYXNlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAkY29sb3ItYm90dG9uO1xuICBib3JkZXI6IDFweCBzb2xpZCAkY29sb3ItYm90dG9uO1xuICAmOmhvdmVyIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xuICAgIGNvbG9yOiAkY29sb3ItYm90dG9uO1xuICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC41cyBlYXNlO1xuICB9XG59XG4iXX0= */\"] });\n"]},"metadata":{},"sourceType":"module"}