{"ast":null,"code":"import _asyncToGenerator from \"/home/angeloacr/Proyectos/loteriaNacional/app/loteriaNacionalFront/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport let ConsultaService = /*#__PURE__*/(() => {\n  class ConsultaService {\n    constructor(http) {\n      this.http = http;\n      this.today = new Date();\n      this.localSource = 'http://localhost:100';\n      this.testSource = 'https://ventas-api-prueba.loteria.com.ec';\n      this.productionSource = 'https://ventas-api.loteria.com.ec'; //mySource = this.localSource;\n      //mySource = this.testSource;\n\n      this.mySource = this.productionSource;\n    }\n\n    recuperarSorteosJugados() {\n      let headers = new HttpHeaders();\n      headers = headers.append('Content-Type', 'application/json');\n      var address = '/loteria';\n      let endpoint = '/cache';\n      endpoint = `${endpoint}/sorteosJugados`;\n      address = this.mySource + address + endpoint;\n      return new Promise((resolve, reject) => {\n        this.http.get(address, {\n          headers: headers\n        }).subscribe(data => {\n          let sorteosJugados = data.values;\n          console.log(sorteosJugados);\n          sorteosJugados.sort(this.ordenaSorteos);\n          resolve(sorteosJugados);\n        });\n      });\n    }\n\n    ordenaSorteos(a, b) {\n      let a1 = a['sorteo'];\n      let b1 = b['sorteo'];\n      return b1 - a1;\n    }\n\n    recuperarBoletoGanador(sorteo, combinaciones) {\n      let headers = new HttpHeaders();\n      headers = headers.append('Content-Type', 'application/json');\n      let endpoint = '';\n      let address = '/loteria';\n      endpoint = `${endpoint}/ganador`;\n      address = this.mySource + address + endpoint;\n      let body = {\n        sorteo,\n        combinaciones\n      };\n      console.log(body);\n      return new Promise((resolve, reject) => {\n        this.http.post(address, body, {\n          headers: headers\n        }).subscribe(data => {\n          let boletoGanador = data;\n          resolve(boletoGanador);\n        }, error => {\n          reject(new Error(error.error.message));\n        });\n      });\n    }\n\n    getUltimoResultado() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        let headers = new HttpHeaders();\n        headers = headers.append('Content-Type', 'application/json');\n        let address = '/loteria';\n        let endpoint = '/cache/ultimoResultado';\n        let auxAddress = _this.mySource + address + endpoint;\n        return new Promise((resolve, reject) => {\n          _this.http.get(auxAddress, {\n            headers: headers\n          }).subscribe(data => {\n            let response;\n            let loteriaNacional = data;\n            localStorage.setItem('loteriaNacionalUltimoResultado', JSON.stringify(loteriaNacional));\n            response = {\n              tipo: 'loteriaNacional',\n              data: loteriaNacional\n            };\n            resolve(response);\n          }, error => {\n            reject(new Error(error.error.message));\n          });\n        });\n      })();\n    }\n\n    obtenerBoletin(sorteo) {\n      let sourceBoletines = `${this.mySource}/uploads/boletines/`;\n      return new Promise((resolve, reject) => {\n        let boletinAddress = `${sourceBoletines}T1${sorteo}.jpg`;\n        resolve(boletinAddress);\n      });\n    }\n\n  }\n\n  ConsultaService.ɵfac = function ConsultaService_Factory(t) {\n    return new (t || ConsultaService)(i0.ɵɵinject(i1.HttpClient));\n  };\n\n  ConsultaService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ConsultaService,\n    factory: ConsultaService.ɵfac,\n    providedIn: 'root'\n  });\n  return ConsultaService;\n})();","map":null,"metadata":{},"sourceType":"module"}