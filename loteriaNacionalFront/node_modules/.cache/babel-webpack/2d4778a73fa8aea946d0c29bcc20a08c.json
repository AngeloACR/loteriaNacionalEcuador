{"ast":null,"code":"import _asyncToGenerator from \"/home/angeloacr/Proyectos/loteriaNacional/app/loteriaNacionalFront/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/codigos-promocionales.service\";\nexport let CodigosPromocionalesComponent = /*#__PURE__*/(() => {\n  class CodigosPromocionalesComponent {\n    constructor(codigosService) {\n      this.codigosService = codigosService;\n      this.codigos = [];\n    }\n\n    ngOnInit() {//this.codigos = (await this.codigosService.obtenerCodigos() as any).values\n\n      return _asyncToGenerator(function* () {})();\n    }\n\n    generarTxt() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        _this.codigos = _this.codigosService.obtenerTxt().subscribe(data => {\n          var fileName = \"\";\n          const contentDisposition = data.headers.get('Content-Disposition');\n\n          if (contentDisposition) {\n            const fileNameRegex = /filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/;\n            const matches = fileNameRegex.exec(contentDisposition);\n\n            if (matches != null && matches[1]) {\n              fileName = matches[1].replace(/['\"]/g, '');\n            }\n          }\n\n          const blob = new Blob([data.body], {\n            type: \"text/txt\"\n          });\n          const element = document.createElement(\"a\");\n          element.href = URL.createObjectURL(blob);\n          element.download = fileName;\n          element.click();\n        }, error => {\n          throw new Error(error.error.message);\n        });\n      })();\n    }\n\n  }\n\n  CodigosPromocionalesComponent.ɵfac = function CodigosPromocionalesComponent_Factory(t) {\n    return new (t || CodigosPromocionalesComponent)(i0.ɵɵdirectiveInject(i1.CodigosPromocionalesService));\n  };\n\n  CodigosPromocionalesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CodigosPromocionalesComponent,\n    selectors: [[\"app-codigos-promocionales\"]],\n    decls: 2,\n    vars: 0,\n    consts: [[3, \"click\"]],\n    template: function CodigosPromocionalesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function CodigosPromocionalesComponent_Template_button_click_0_listener() {\n          return ctx.generarTxt();\n        });\n        i0.ɵɵtext(1, \"Generar archivo de codigos\");\n        i0.ɵɵelementEnd();\n      }\n    },\n    styles: [\"button[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);border-radius:40px;height:30px;padding:5px 50px;outline:none;font-family:\\\"Monstserrat SemiBold\\\";color:#fff;font-size:12px;cursor:pointer;transition:background-color .5s ease;background-color:#28aae1;border:1px solid #28AAE1}button[_ngcontent-%COMP%]:hover{background-color:#fff;color:#28aae1;transition:background-color .5s ease}\"]\n  });\n  return CodigosPromocionalesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}