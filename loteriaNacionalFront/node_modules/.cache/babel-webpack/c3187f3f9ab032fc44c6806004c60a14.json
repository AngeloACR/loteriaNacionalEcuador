{"ast":null,"code":"import _asyncToGenerator from \"/home/angeloacr/Proyectos/loteriaNacional/app/loteriaNacionalFront/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { NavigationStart, NavigationEnd, NavigationError } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"./consultas/services/consultas.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"./codigos-promocionales/components/popup-promo/popup-promo.component\";\n\nfunction AppComponent_app_popup_promo_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-popup-promo\", 1);\n    i0.ɵɵlistener(\"closePromo\", function AppComponent_app_popup_promo_1_Template_app_popup_promo_closePromo_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return ctx_r1.closePromo();\n    });\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport class AppComponent {\n  constructor(router, consultas) {\n    this.router = router;\n    this.consultas = consultas;\n    this.title = 'loteriaNacionalWeb';\n    this.token = '';\n    this.isDetail = false;\n    this.showPromo = false;\n    this.isDetail = false;\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationStart) {\n        let data = decodeURIComponent(event.url);\n\n        if (data.includes('inicio')) {\n          this.showPromo = true;\n        }\n\n        if (data.includes('compra_tus_juegos?token')) {\n          let url = data.split('?token=')[0];\n          /********************************************** SOLO PARA PRUEBAS **********************************************/\n\n          this.token = data.split('?token=')[1];\n          this.router.navigateByUrl(`${url}/${this.token}`);\n        }\n\n        if (data.includes('inicio')) {\n          this.showPromo = true;\n        }\n\n        if (data.includes('compra_tus_juegos/detalle')) {\n          this.isDetail = true;\n          let url;\n          let ticketId;\n\n          if (data.includes('?ticketId')) {\n            url = data.split('?ticketId=')[0];\n            ticketId = data.split('?ticketId=')[1];\n            this.router.navigateByUrl(`${url}/${ticketId}`);\n          }\n        }\n      }\n\n      if (event instanceof NavigationEnd) {}\n\n      if (event instanceof NavigationError) {\n        console.log(event.error);\n      }\n    });\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.consultas.recuperarUltimosResultados();\n    })();\n  }\n\n  closePromo() {\n    this.showPromo = false;\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ConsultasService));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  decls: 2,\n  vars: 1,\n  consts: [[3, \"closePromo\", 4, \"ngIf\"], [3, \"closePromo\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"router-outlet\");\n      i0.ɵɵtemplate(1, AppComponent_app_popup_promo_1_Template, 1, 0, \"app-popup-promo\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showPromo);\n    }\n  },\n  directives: [i1.RouterOutlet, i3.NgIf, i4.PopupPromoComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"sources":["/home/angeloacr/Proyectos/loteriaNacional/app/loteriaNacionalFront/src/app/app.component.ts"],"names":["NavigationStart","NavigationEnd","NavigationError","i0","i1","i2","i3","i4","AppComponent_app_popup_promo_1_Template","rf","ctx","_r2","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","AppComponent_app_popup_promo_1_Template_app_popup_promo_closePromo_0_listener","ɵɵrestoreView","ctx_r1","ɵɵnextContext","closePromo","ɵɵelementEnd","AppComponent","constructor","router","consultas","title","token","isDetail","showPromo","events","subscribe","event","data","decodeURIComponent","url","includes","split","navigateByUrl","ticketId","console","log","error","ngOnInit","recuperarUltimosResultados","ɵfac","AppComponent_Factory","t","ɵɵdirectiveInject","Router","ConsultasService","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","AppComponent_Template","ɵɵelement","ɵɵtemplate","ɵɵadvance","ɵɵproperty","directives","RouterOutlet","NgIf","PopupPromoComponent","styles"],"mappings":";AAAA,SAASA,eAAT,EAA0BC,aAA1B,EAAyCC,eAAzC,QAAiE,iBAAjE;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,wCAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,sEAApB;;AACA,SAASC,uCAAT,CAAiDC,EAAjD,EAAqDC,GAArD,EAA0D;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACpE,UAAME,GAAG,GAAGR,EAAE,CAACS,gBAAH,EAAZ;;AACAT,IAAAA,EAAE,CAACU,cAAH,CAAkB,CAAlB,EAAqB,iBAArB,EAAwC,CAAxC;AACAV,IAAAA,EAAE,CAACW,UAAH,CAAc,YAAd,EAA4B,SAASC,6EAAT,GAAyF;AAAEZ,MAAAA,EAAE,CAACa,aAAH,CAAiBL,GAAjB;AAAuB,YAAMM,MAAM,GAAGd,EAAE,CAACe,aAAH,EAAf;AAAmC,aAAOD,MAAM,CAACE,UAAP,EAAP;AAA6B,KAA9M;AACAhB,IAAAA,EAAE,CAACiB,YAAH;AACH;AAAE;;AACH,OAAO,MAAMC,YAAN,CAAmB;AACtBC,EAAAA,WAAW,CAACC,MAAD,EAASC,SAAT,EAAoB;AAC3B,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,KAAL,GAAa,oBAAb;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,QAAL,GAAgB,KAAhB;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKD,QAAL,GAAgB,KAAhB;AACA,SAAKJ,MAAL,CAAYM,MAAZ,CAAmBC,SAAnB,CAA8BC,KAAD,IAAW;AACpC,UAAIA,KAAK,YAAY/B,eAArB,EAAsC;AAClC,YAAIgC,IAAI,GAAGC,kBAAkB,CAACF,KAAK,CAACG,GAAP,CAA7B;;AACA,YAAIF,IAAI,CAACG,QAAL,CAAc,QAAd,CAAJ,EAA6B;AACzB,eAAKP,SAAL,GAAiB,IAAjB;AACH;;AACD,YAAII,IAAI,CAACG,QAAL,CAAc,yBAAd,CAAJ,EAA8C;AAC1C,cAAID,GAAG,GAAGF,IAAI,CAACI,KAAL,CAAW,SAAX,EAAsB,CAAtB,CAAV;AACA;;AACA,eAAKV,KAAL,GAAaM,IAAI,CAACI,KAAL,CAAW,SAAX,EAAsB,CAAtB,CAAb;AACA,eAAKb,MAAL,CAAYc,aAAZ,CAA2B,GAAEH,GAAI,IAAG,KAAKR,KAAM,EAA/C;AACH;;AACD,YAAIM,IAAI,CAACG,QAAL,CAAc,QAAd,CAAJ,EAA6B;AACzB,eAAKP,SAAL,GAAiB,IAAjB;AACH;;AACD,YAAII,IAAI,CAACG,QAAL,CAAc,2BAAd,CAAJ,EAAgD;AAC5C,eAAKR,QAAL,GAAgB,IAAhB;AACA,cAAIO,GAAJ;AACA,cAAII,QAAJ;;AACA,cAAIN,IAAI,CAACG,QAAL,CAAc,WAAd,CAAJ,EAAgC;AAC5BD,YAAAA,GAAG,GAAGF,IAAI,CAACI,KAAL,CAAW,YAAX,EAAyB,CAAzB,CAAN;AACAE,YAAAA,QAAQ,GAAGN,IAAI,CAACI,KAAL,CAAW,YAAX,EAAyB,CAAzB,CAAX;AACA,iBAAKb,MAAL,CAAYc,aAAZ,CAA2B,GAAEH,GAAI,IAAGI,QAAS,EAA7C;AACH;AACJ;AACJ;;AACD,UAAIP,KAAK,YAAY9B,aAArB,EAAoC,CACnC;;AACD,UAAI8B,KAAK,YAAY7B,eAArB,EAAsC;AAClCqC,QAAAA,OAAO,CAACC,GAAR,CAAYT,KAAK,CAACU,KAAlB;AACH;AACJ,KA/BD;AAgCH;;AACKC,EAAAA,QAAQ,GAAG;AAAA;;AAAA;AACb,YAAM,KAAI,CAAClB,SAAL,CAAemB,0BAAf,EAAN;AADa;AAEhB;;AACDxB,EAAAA,UAAU,GAAG;AACT,SAAKS,SAAL,GAAiB,KAAjB;AACH;;AA/CqB;;AAiD1BP,YAAY,CAACuB,IAAb,GAAoB,SAASC,oBAAT,CAA8BC,CAA9B,EAAiC;AAAE,SAAO,KAAKA,CAAC,IAAIzB,YAAV,EAAwBlB,EAAE,CAAC4C,iBAAH,CAAqB3C,EAAE,CAAC4C,MAAxB,CAAxB,EAAyD7C,EAAE,CAAC4C,iBAAH,CAAqB1C,EAAE,CAAC4C,gBAAxB,CAAzD,CAAP;AAA6G,CAApK;;AACA5B,YAAY,CAAC6B,IAAb,GAAoB,aAAc/C,EAAE,CAACgD,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAE/B,YAAR;AAAsBgC,EAAAA,SAAS,EAAE,CAAC,CAAC,UAAD,CAAD,CAAjC;AAAiDC,EAAAA,KAAK,EAAE,CAAxD;AAA2DC,EAAAA,IAAI,EAAE,CAAjE;AAAoEC,EAAAA,MAAM,EAAE,CAAC,CAAC,CAAD,EAAI,YAAJ,EAAkB,CAAlB,EAAqB,MAArB,CAAD,EAA+B,CAAC,CAAD,EAAI,YAAJ,CAA/B,CAA5E;AAA+HC,EAAAA,QAAQ,EAAE,SAASC,qBAAT,CAA+BjD,EAA/B,EAAmCC,GAAnC,EAAwC;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AAC9ON,MAAAA,EAAE,CAACwD,SAAH,CAAa,CAAb,EAAgB,eAAhB;AACAxD,MAAAA,EAAE,CAACyD,UAAH,CAAc,CAAd,EAAiBpD,uCAAjB,EAA0D,CAA1D,EAA6D,CAA7D,EAAgE,iBAAhE,EAAmF,CAAnF;AACH;;AAAC,QAAIC,EAAE,GAAG,CAAT,EAAY;AACVN,MAAAA,EAAE,CAAC0D,SAAH,CAAa,CAAb;AACA1D,MAAAA,EAAE,CAAC2D,UAAH,CAAc,MAAd,EAAsBpD,GAAG,CAACkB,SAA1B;AACH;AAAE,GANgD;AAM9CmC,EAAAA,UAAU,EAAE,CAAC3D,EAAE,CAAC4D,YAAJ,EAAkB1D,EAAE,CAAC2D,IAArB,EAA2B1D,EAAE,CAAC2D,mBAA9B,CANkC;AAMkBC,EAAAA,MAAM,EAAE,CAAC,qKAAD;AAN1B,CAArB,CAAlC","sourcesContent":["import { NavigationStart, NavigationEnd, NavigationError, } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"./consultas/services/consultas.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"./codigos-promocionales/components/popup-promo/popup-promo.component\";\nfunction AppComponent_app_popup_promo_1_Template(rf, ctx) { if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"app-popup-promo\", 1);\n    i0.ɵɵlistener(\"closePromo\", function AppComponent_app_popup_promo_1_Template_app_popup_promo_closePromo_0_listener() { i0.ɵɵrestoreView(_r2); const ctx_r1 = i0.ɵɵnextContext(); return ctx_r1.closePromo(); });\n    i0.ɵɵelementEnd();\n} }\nexport class AppComponent {\n    constructor(router, consultas) {\n        this.router = router;\n        this.consultas = consultas;\n        this.title = 'loteriaNacionalWeb';\n        this.token = '';\n        this.isDetail = false;\n        this.showPromo = false;\n        this.isDetail = false;\n        this.router.events.subscribe((event) => {\n            if (event instanceof NavigationStart) {\n                let data = decodeURIComponent(event.url);\n                if (data.includes('inicio')) {\n                    this.showPromo = true;\n                }\n                if (data.includes('compra_tus_juegos?token')) {\n                    let url = data.split('?token=')[0];\n                    /********************************************** SOLO PARA PRUEBAS **********************************************/\n                    this.token = data.split('?token=')[1];\n                    this.router.navigateByUrl(`${url}/${this.token}`);\n                }\n                if (data.includes('inicio')) {\n                    this.showPromo = true;\n                }\n                if (data.includes('compra_tus_juegos/detalle')) {\n                    this.isDetail = true;\n                    let url;\n                    let ticketId;\n                    if (data.includes('?ticketId')) {\n                        url = data.split('?ticketId=')[0];\n                        ticketId = data.split('?ticketId=')[1];\n                        this.router.navigateByUrl(`${url}/${ticketId}`);\n                    }\n                }\n            }\n            if (event instanceof NavigationEnd) {\n            }\n            if (event instanceof NavigationError) {\n                console.log(event.error);\n            }\n        });\n    }\n    async ngOnInit() {\n        await this.consultas.recuperarUltimosResultados();\n    }\n    closePromo() {\n        this.showPromo = false;\n    }\n}\nAppComponent.ɵfac = function AppComponent_Factory(t) { return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ConsultasService)); };\nAppComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AppComponent, selectors: [[\"app-root\"]], decls: 2, vars: 1, consts: [[3, \"closePromo\", 4, \"ngIf\"], [3, \"closePromo\"]], template: function AppComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵelement(0, \"router-outlet\");\n        i0.ɵɵtemplate(1, AppComponent_app_popup_promo_1_Template, 1, 0, \"app-popup-promo\", 0);\n    } if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showPromo);\n    } }, directives: [i1.RouterOutlet, i3.NgIf, i4.PopupPromoComponent], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MifQ== */\"] });\n"]},"metadata":{},"sourceType":"module"}